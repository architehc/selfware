47:**Bug 2: `truncate`** - off-by-one error, truncates at max_len-1 instead of max_len
94:**2. `truncate`** - Fixed off-by-one error
109:**2. `truncate`** - Fixed off-by-one error
